# =============================================================================
# Universal Media Studio - Requirements
# Pinned for stability on RunPod with CUDA 12.8
# =============================================================================

# WhisperX and dependencies
whisperx==3.7.4
# Updated for WhisperX 3.7.4 compatibility (requires >=3.3.2)
pyannote.audio==3.3.2
# Additional WhisperX 3.7.4 dependencies
ctranslate2>=4.5.0
faster-whisper>=1.1.1
nltk>=3.9.1
# AV version constraint for Python 3.9 compatibility  
av<16.0.0
# Triton for x86_64 Linux only
triton>=3.3.0; sys_platform == 'linux' and platform_machine == 'x86_64'

# Gradio UI
gradio==5.0.0

# Audio Processing
demucs==4.0.1
deepfilternet==0.5.6
soundfile==0.12.1
librosa==0.10.2
pydub==0.25.1

# Video Processing
opencv-python-headless==4.9.0.80

# Modern Restoration Library (Alternative to BasicSR)
spandrel==0.3.0

# CodeFormer dependencies
basicsr==1.4.2
facexlib==0.3.0
lpips==0.1.4
einops==0.7.0

# Utilities
# Updated for WhisperX 3.7.4 compatibility (requires numpy>=2.0.2)
numpy>=2.0.2,<2.1.0
scipy==1.12.0
Pillow==10.2.0
tqdm==4.66.2
requests==2.31.0
# Updated for WhisperX 3.7.4 compatibility (requires >=4.48.0)
huggingface_hub[hf_transfer]==0.21.4
transformers>=4.48.0

# HF Transfer acceleration
hf_transfer==0.1.5

# Security Patch: Torch 2.5.1+ is recommended to mitigate CVE-2025-32434
# Updated to match WhisperX 3.7.4 requirements (torchaudio>=2.8.0)
torch==2.8.0
torchvision==0.23.0
torchaudio==2.8.0
